## 小程序原理和架构 ？

## 小程序有几种文件？
- WXML： 微信自己定义的一套组件
- WXSS :    用于描述 WXML 的组件样式
- js :   逻辑处理
- json  :  小程序页面配置（如页面注册，页面标题及tabBar）

- wxs： 封装模块的

## 小程序的 wxss 和 css 有什么区别？
- 1：WXSS具有CSS大部分的特性，也做了一些扩充和修改
- 2：WXSS新增了尺寸单位，WXSS在底层支持新的尺寸单位rpx
- 3：WXSS仅支持部分CSS选择器
- 4：WXSS提供全局样式与局部样式
- 5：WXSS背景图片只能引入外链，不能使用本地图片
- 6：小程序样式使用 @import 引入 外联样式文件，地址为相对路径。
- 7：尺寸单位为 rpx , rpx 是响应式像素,可以根据屏幕宽度进行自适应。


## 小程序wxml与标准的html的异同？

- 标签名字不一样，且小程序标签更少，单一标签更多；view，text，image，navigator
- 多了一些wx:if 这样的属性以及 {{ }}这样的表达式
- WXML仅能在微信小程序开发者工具中预览，而HTML可以在浏览器内预览；
- 组件封装不同， WXML对组件进行了重新封装，
- 小程序运行在JS Core内，没有DOM树和window对象，小程序中无法使用window对象和document对象。

## 小程序的样式尺寸单位是什么？

是 `rpx`

## 小程序app.json 全局配置文件描述 ？
- pages : 用于存放当前小程序的所有页面路径
- window : 小程序所有页面的顶部背景颜色，文字颜色配置。
- tabBar : 小程序底部的 Tab ,最多5个，最少2个

## 小程序的双向绑定？
小程序直接 `this.data`属性是不可以同步到视图的，必须调用
```js
this.setData({
    // 这里设置
})
```

## 什么是冷启动 和 热启动？

小程序启动可以分为两种情况，一种是冷启动，一种是热启动

- 冷启动：如果用户首次打开，或小程序销毁后被用户再次打开，此时小程序需要重新加载启动
- 热启动：如果用户已经打开过某小程序，然后在一定时间内再次打开该小程序，此时小程序并未被销毁，只是从后台状态进入前台状态

## 小程序的生命周期?

相关面试题：https://blog.csdn.net/qq_63358859/article/details/136258427

**1. 应用级别生命周期**

应用生命周期通常是指一个小程序从 启动 → 运行 → 销毁的整个过程，，应用生命周期函数需要 在 `app.js` 文件的 `App()` 方法中定义

- `onLaunch`: 监听小程序初始化，全局只会执行 1 次。
- `onShow`: 监听小程序启动或切前台
- `onHide`: 监听小程序切后台

**2. 页面级别生命周期**

页面生命周期就是指小程序页面从 加载 → 运行 → 销毁的整个过程，小程序中的一个页面都需要在对应页面的 `.js` 文件中调用 `Page()` 方法来注册。`Page()` 接受一个 `Object` 类型参数，其指定页面的初始数据、生命周期回调、事件处理函数等。

- `onLoad`: 页面加载时触发。一个页面只会调用一次，可以在`onLoad` 的参数中获取打开当前页面路径中的参数
- `onShow`: 页面显示/切入前台时触发
- `onReady`: 页面初次渲染完成时触发。一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互
- `onHide`: 页面隐藏/切入后台时触发。 如 `navigateTo` 或底部 `tab` 切换到其他页面，小程序切入后台等
- `onUnload`: 页面卸载时触发。如 `redirectTo` 或 `navigateBack` 到其他页面时

> 注意触发顺序是： onLoad -> onShow -> onReady

## 小程序页面间有哪些传递数据的方法？
1. 使用全局变量实现数据传递。在 app.js 文件中定义全局变量 globalData， 将需要存储的信息存放在里面
2. 使用 wx.navigateTo与 wx.redirectTo 的时候，可以将部分数据放在 url 里面，并在新页面onLoad的时候初始化
3. 使用本地缓存Storage 相关

## 小程序怎么跟随事件传值？

给 HTML 元素添加 `data-*` 属性来传递我们需要的值，然后通过 `e.currentTarget.dataset` 或 `onload`的 `param`参数获取。但 `data-`名称不能有大写字母和不可以存放对象

## 简述下 wx.navigateTo(), wx.redirectTo(), wx.switchTab(), wx.navigateBack(), wx.reLaunch()的区别?

- wx.navigateTo()：保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面
- wx.redirectTo()：关闭当前页面，跳转到应用内的某个页面。但是不允许跳转到 tabbar 页面
- wx.switchTab()：跳转到 abBar 页面，并关闭其他所有非 tabBar 页面
- wx.navigateBack()：关闭当前页面，返回上一页面或多级页面。可通过getCurrentPages() 获取当前的页面栈，决定需要返回几层
- wx.reLaunch()：关闭所有页面，打开到应用内的某个页面


## 小程序主包大小限制？

## 小程序怎么分包？

## 小程序如何自定义tabbar？

## bindtap和catchtap的区别是什么？
相同：
首先他们都是作为点击事件函数，就是点击时触发。在这个作用上他们是一样的，可以不做区分

不同：
他们的不同点主要是bindtap是不会阻止冒泡事件的，catchtap是阻值冒泡的

## 小程序中的openId 和 unionId的区别？
**OpenId**：OpenId 是一个用户对于一个小程序／公众号的标识, 用于识别用户身份、安全验证等

- 同一个人，使用不同的小程序，会留下不同的小程序 OpenId
- 同一个微信用户在小程序和公众号上的openid是不同的

**UnionId**: UnionId 是一个用户对于同主体微信小程序／公众号／APP的标识，开发者需要在微信开放平台下绑定相同账号的主体。开发者可通过 UnionId，实现多个小程序、公众号、甚至APP 之间的数据互通。

- 同一用户，对同一个微信开放平台下的不同应用，unionid是相同的

开发者可以直接通过 wx.login + code2Session 获取到该用户 UnionID，无须用户授权。

## 小程序的登陆流程？
https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html

1. 调用 `wx.login()` 获取 临时登录凭证`code` ，并回传到开发者服务器。
2. 开发者服务器调用 auth.code2Session 接口，换取 用户唯一标识 `OpenID` 、 用户在微信开放平台账号下的唯一标识`UnionID`（若当前小程序已绑定到微信开放平台账号） 和 会话密钥 `session_key`

## 小程序的本地存储，如果切换用户后，能访问到之前的本地存储吗？
**不能**， 小程序的本地缓存不仅仅通过小程序这个维度来隔离空间，还会考虑不同用户的情况。

## 小程序中常见的开放能力API

- 分享
- 扫码

